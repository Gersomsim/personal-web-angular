<div class="space-y-1.5">
	@if (label()) {
		<label class="font-mono text-xs font-medium text-slate-500 dark:text-slate-400">{{ label() }}</label>
	}

	@if (hasImage()) {
		<!-- Image preview -->
		<div class="group relative overflow-hidden rounded-md border border-slate-200/50 dark:border-slate-800/50">
			<div class="aspect-video w-full">
				<img
					[src]="displayUrl()"
					alt="Imagen del post"
					class="size-full object-cover transition-opacity"
					[class.opacity-50]="uploading()"
				/>
			</div>

			@if (uploading()) {
				<div class="absolute inset-0 flex items-center justify-center">
					<div class="size-5 animate-spin rounded-full border-2 border-emerald-500 border-t-transparent"></div>
				</div>
			}

			@if (!uploading()) {
				<div class="absolute inset-0 flex items-end justify-end gap-1.5 p-2 opacity-0 transition-opacity group-hover:opacity-100">
					<label class="flex cursor-pointer items-center gap-1 rounded-sm bg-slate-950/75 px-2 py-1 font-mono text-[10px] text-slate-300 transition-colors hover:bg-slate-900 hover:text-white">
						<input
							type="file"
							accept="image/*"
							class="hidden"
							(change)="onFileInput($event)"
						/>
						↺ reemplazar
					</label>
					<button
						type="button"
						(click)="remove()"
						class="flex items-center gap-1 rounded-sm bg-slate-950/75 px-2 py-1 font-mono text-[10px] text-slate-300 transition-colors hover:bg-red-900/80 hover:text-red-300"
					>
						× eliminar
					</button>
				</div>
			}
		</div>
	} @else {
		<!-- Drop zone -->
		<div
			[class]="dropZoneClasses()"
			(dragover)="onDragOver($event)"
			(dragleave)="onDragLeave($event)"
			(drop)="onDrop($event)"
			(click)="openPicker(fileInput)"
		>
			<input
				#fileInput
				type="file"
				accept="image/*"
				class="hidden"
				(change)="onFileInput($event)"
			/>

			<div class="flex flex-col items-center gap-2 px-4 py-6">
				<svg
					class="size-4 text-slate-400 dark:text-slate-600"
					fill="none"
					viewBox="0 0 24 24"
					stroke-width="1.5"
					stroke="currentColor"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"
					/>
				</svg>
				<p class="font-mono text-xs text-slate-500 dark:text-slate-400">
					arrastra o
					<span class="text-emerald-500 dark:text-emerald-400">selecciona imagen</span>
				</p>
				<p class="font-mono text-[10px] text-slate-400 dark:text-slate-600">jpg · png · webp · gif</p>
			</div>
		</div>
	}

	@if (hint()) {
		<p class="font-mono text-[10px] text-slate-400 dark:text-slate-600">{{ hint() }}</p>
	}
</div>
