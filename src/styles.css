/* You can add global styles to this file, and also import other style files */

@import url("https://fonts.googleapis.com/css2?family=Cascadia+Code:ital,wght@0,200..700;1,200..700&display=swap");
@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

/* Smooth color transitions for dark mode */
html {
	color-scheme: light dark;
}

* {
	transition-property: background-color, border-color;
	transition-duration: 150ms;
	transition-timing-function: ease;
}

/* Disable transitions on page load */
.no-transitions * {
	transition: none !important;
}

@keyframes blink {
	0%,
	50% {
		opacity: 1;
	}
	51%,
	100% {
		opacity: 0;
	}
}
.cursor {
	animation: blink 1.3s step-end infinite;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   MARKDOWN RENDERER  (app-markdown · ViewEncapsulation.None)
   ═══════════════════════════════════════════════════════════════════════════════ */

/* ─── Base ──────────────────────────────────────────────────────────────────── */

.md-prose {
	@apply text-base leading-[1.85] text-slate-700 dark:text-slate-300;
}

/* ─── Paragraphs ────────────────────────────────────────────────────────────── */

.md-prose p {
	@apply mb-6;
}

/* ─── Headings ──────────────────────────────────────────────────────────────── */

.md-prose h1 {
	@apply mb-4 mt-12 text-3xl font-bold tracking-tight text-slate-900 dark:text-white;
}

/* H2: emerald accent bar — same visual language as // section tags */
.md-prose h2 {
	@apply mb-4 mt-12 text-2xl font-bold tracking-tight text-slate-900 dark:text-white;
}

.md-prose h2::before {
	content: "";
	@apply mb-3 block h-px w-6 bg-emerald-500;
}

.md-prose h3 {
	@apply mb-3 mt-8 text-xl font-semibold tracking-tight text-slate-900 dark:text-white;
}

.md-prose h4 {
	@apply mb-2 mt-6 text-lg font-semibold text-slate-800 dark:text-slate-100;
}

.md-prose h5,
.md-prose h6 {
	@apply mb-2 mt-4 font-semibold text-slate-800 dark:text-slate-100;
}

/* ─── Links ─────────────────────────────────────────────────────────────────── */

.md-prose a {
	@apply text-emerald-600 underline decoration-emerald-500/40 underline-offset-2 transition-colors hover:text-emerald-700 hover:decoration-emerald-500 dark:text-emerald-400 dark:hover:text-emerald-300;
}

/* ─── Inline code ───────────────────────────────────────────────────────────── */

.md-prose :not(pre) > code {
	@apply rounded-sm px-1.5 py-0.5 font-mono text-[0.875em] text-emerald-700 dark:text-emerald-400;
	background-color: color-mix(in srgb, var(--color-emerald-500) 8%, transparent);
}

/* ─── Code blocks — terminal chrome ────────────────────────────────────────── */

/*
   Design intent: code is always a dark terminal regardless of page theme.
   Header: slate-800 chrome with three window dots + // lang signature.
   Body:   slate-950 — canonical terminal black.
*/

.md-prose .md-code-block {
	margin: 1.5rem 0;
	border-radius: 0.5rem;
	overflow: hidden;
	border: 1px solid #334155; /* slate-700 — consistent on dark bg */
}

.md-prose .md-code-header {
	display: flex;
	align-items: center;
	gap: 0.75rem;
	background-color: #1e293b; /* slate-800 — always dark */
	border-bottom: 1px solid #334155; /* slate-700 */
	padding: 0.5rem 1rem;
}

/* Three window dots via box-shadow trick */
.md-prose .md-code-header::before {
	content: "";
	display: inline-block;
	width: 10px;
	height: 10px;
	border-radius: 50%;
	background-color: #10b981; /* emerald-500 */
	box-shadow:
		16px 0 0 0 #475569,
		/* slate-600 */ 32px 0 0 0 #334155; /* slate-700 */
	flex-shrink: 0;
	margin-right: 32px; /* visual clearance for shadow dots */
}

/* // lang label */
.md-prose .md-code-lang {
	flex: 1;
	font-family: "Cascadia Code", monospace;
	font-size: 0.75rem;
	font-weight: 500;
	letter-spacing: 0.025em;
	color: #34d399; /* emerald-400 — readable on dark */
}

.md-prose .md-code-lang::before {
	content: "// ";
	color: #475569; /* slate-600 */
	font-weight: 400;
}

/* Copy button */
.md-prose .md-code-copy {
	font-family: "Cascadia Code", monospace;
	font-size: 0.6875rem;
	font-weight: 400;
	color: #64748b; /* slate-500 */
	background: transparent;
	border: none;
	cursor: pointer;
	padding: 0.125rem 0.5rem;
	border-radius: 0.25rem;
	transition:
		color 150ms ease,
		background-color 150ms ease;
	flex-shrink: 0;
}

.md-prose .md-code-copy:hover {
	color: #cbd5e1; /* slate-300 */
	background-color: rgba(255, 255, 255, 0.06);
}

.md-prose .md-code-copy--copied {
	color: #34d399; /* emerald-400 */
}

/* Code body */
.md-prose .md-code-block pre {
	margin: 0;
	overflow-x: auto;
	background-color: #020617; /* slate-950 — terminal black */
	padding: 1.25rem 1.5rem;
}

.md-prose .md-code-block pre code {
	display: block;
	font-family: "Cascadia Code", monospace;
	font-size: 0.875rem;
	line-height: 1.7;
	color: #e2e8f0; /* slate-200 */
	background: transparent;
	padding: 0;
}

/* ─── Blockquote ────────────────────────────────────────────────────────────── */

.md-prose blockquote {
	@apply my-6 border-l-4 border-emerald-400 pl-5 dark:border-emerald-500/60;
}

.md-prose blockquote p {
	@apply mb-0 italic text-slate-600 dark:text-slate-400;
}

/* ─── Lists ─────────────────────────────────────────────────────────────────── */

.md-prose ul,
.md-prose ol {
	@apply mb-6;
}

/* Unordered: ▸ bullet in emerald */
.md-prose ul {
	@apply list-none space-y-2 pl-5;
}

.md-prose ul li {
	@apply relative pl-4;
}

.md-prose ul li::before {
	content: "▸";
	@apply absolute left-0 top-[2px] text-[10px] font-bold text-emerald-500;
}

/* Ordered: monospace counter in emerald */
.md-prose ol {
	@apply list-none space-y-2 pl-5;
	counter-reset: md-counter;
}

.md-prose ol li {
	@apply relative pl-8;
	counter-increment: md-counter;
}

.md-prose ol li::before {
	content: counter(md-counter, decimal-leading-zero);
	@apply absolute left-0 top-px font-mono text-xs font-medium text-emerald-500;
}

/* Nested lists */
.md-prose ul ul,
.md-prose ol ol,
.md-prose ul ol,
.md-prose ol ul {
	@apply mt-2 mb-0;
}

/* ─── Tables ────────────────────────────────────────────────────────────────── */

.md-prose table {
	@apply my-6 w-full border-collapse text-sm;
}

.md-prose thead {
	@apply border-b border-slate-200 dark:border-slate-700;
}

.md-prose th {
	@apply px-4 py-2.5 text-left font-mono text-[10px] font-medium uppercase tracking-widest text-slate-500 dark:text-slate-400;
}

.md-prose td {
	@apply border-b border-slate-100 px-4 py-2.5 text-slate-700 dark:border-slate-800 dark:text-slate-300;
}

.md-prose tbody tr:last-child td {
	@apply border-none;
}

/* ─── Horizontal rule ───────────────────────────────────────────────────────── */

.md-prose hr {
	@apply my-10 border-none;
}

.md-prose hr::before {
	content: "· · ·";
	@apply block text-center font-mono text-lg tracking-[0.5em] text-slate-300 dark:text-slate-700;
}

/* ─── Images ────────────────────────────────────────────────────────────────── */

.md-prose img {
	@apply my-6 w-full rounded-lg border border-slate-200/50 dark:border-slate-800/50;
}

/* ─── Strong / Em / Del ─────────────────────────────────────────────────────── */

.md-prose strong {
	@apply font-semibold text-slate-900 dark:text-white;
}

.md-prose em {
	@apply italic;
}

.md-prose del {
	@apply text-slate-400 line-through;
}

/* ─── First/last element margin reset ──────────────────────────────────────── */

.md-prose > *:first-child {
	@apply mt-0;
}

.md-prose > *:last-child {
	@apply mb-0;
}
